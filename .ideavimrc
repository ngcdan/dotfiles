"
"
" ------------------ General Settings -------------------
let g:mapleader = "\<Space>"

set hidden                              " Required to keep multiple buffers open multiple buffers
set encoding=utf-8                      " The encoding displayed
set nobackup                            " This is recommended by coc
set nowritebackup                       " This is recommended by coc

set history=50
set ruler
set showcmd " display incomplete commands
set laststatus=2
set autowrite    " automatically :write before running commands
set noshowmode


" indents
filetype plugin indent on
set shiftwidth=2
set tabstop=2                           " Insert 2 spaces for a tab
set autoindent                          " Good auto indent
set smarttab
set nowrap "No Wrap lines
set backspace=indent,eol,start  " allow backspacing over everything in insert mode

set wildignore+=*/node_modules/*

set nojoinspaces                        " use one space, not two, after punctuation

set mouse=a                            " Enable your mouse

set number relativenumber                             " Line numbers
set numberwidth=5

" set list listchars=tab:»·,trail:·,space:· " Display extra whitespace

set splitbelow splitright                         " Horizontal splits will automatically be below

" Autocomplete with dictionary words when spell check is on
set complete+=kspell

" Always use vertical diffs
set diffopt+=vertical

set cursorline                          " Enable highlighting of the current line
" make it obvious where 80 characters is
set colorcolumn=120

set updatetime=50                      " Faster completion

set clipboard=unnamedplus               " Copy paste between vim and everything else

" ingore case when searching
set ignorecase
set incsearch                           " search and hightlight 
set hlsearch
set smartcase

set lazyredraw

set termguicolors
set background=dark                     " tell vim what the background color looks like


set cmdheight=2 " Give more space for displaying messages.
set shortmess+=c    " Don't pass messages to |ins-completion-menu|.
set ttyfast

set inccommand=split " for incsearch while sub ( neovim only )

if has("patch-8.1.1564")
  " Recently vim can merge signcolumn and number column into one
  set signcolumn=number
else
  set signcolumn=yes
endif
filetype plugin indent on

" Switch syntax highlighting on, when the terminal has colors
" Also switch on highlighting the last used search pattern.
if (&t_Co > 2 || has("gui_running")) && !exists("syntax_on")
  syntax on
endif

let mapleader= " "


" -------------------- Navigation, Window--------------------
" Split 
nnoremap <space>\ :vsplit<CR> 
nnoremap ss :vsplit<CR> 
nnoremap <space>/ :split<CR>
nnoremap sv :split<CR>

" resize 
nnoremap <silent> <space>- :vertical resize -8<CR>
nnoremap <silent> <space>= :vertical resize +8<CR>

" window focus
nnoremap <c-h> <c-w>h
nnoremap <c-j> <c-w>j
nnoremap <c-k> <c-w>k
nnoremap <c-l> <c-w>l

" Get off my lawn
nnoremap <Left> :echoe "Use h"<CR>
nnoremap <Right> :echoe "Use l"<CR>
nnoremap <Up> :echoe "Use k"<CR>
nnoremap <Down> :echoe "Use j"<CR>

" Better nav for omnicomplete
inoremap <expr> <c-j> ("\<C-n>")
inoremap <expr> <c-k> ("\<C-p>")

" Tabs
nnoremap <silent> <TAB> :bnext<CR>
nnoremap <silent> <S-TAB> :bprevious<CR>

" --------------Edit--------------------
" close all buffer
nmap ba :Bufonly<cr>

command! Bufonly silent! call Preserve("exec '%bd|e#|bd#'")

" preserve function
if !exists('*Preserve')
    function! Preserve(command)
        try
            let l:win_view = winsaveview()
            silent! execute 'keeppatterns keepjumps ' . a:command
        finally
            call winrestview(l:win_view)
        endtry
    endfunction
endif

" Fast saving 
nmap <space>w :w!<CR>
" Alternate way to quit 
nnoremap qq :wq!<CR>

" --------------------Indent, Format, Refactor------------------------
" Better indenting
vnoremap < <gv
vnoremap > >gv
" Move selected line / block of text in visual mode
xnoremap K :move '<-2<CR>gv-gv
xnoremap J :move '>+1<CR>gv-gv

" ----------------- Search, Replace --------------------
" No highlight search
map <silent> <space><space> :nohl<cr>

" ---------------------- Escape, Exit ------------------------
" escape
inoremap jk <Esc>
inoremap kj <Esc>
nnoremap <silent> <C-c> <Esc>
